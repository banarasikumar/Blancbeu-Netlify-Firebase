if(window.location.pathname==="/admin"){window.location.replace("/admin/")}(function checkVersion(){fetch("/version.json?t="+Date.now()).then(res=>res.json()).then(data=>{const serverVersion=data.version;const serverBuild=data.buildTime;const localVersion=localStorage.getItem("app_version");console.log(`[Version Check] Server: ${serverVersion}, Local: ${localVersion}`);if(localVersion&&localVersion!==serverVersion){console.warn("[Version Check] Mismatch detected! Nuking cache and reloading...");if("serviceWorker"in navigator){navigator.serviceWorker.getRegistrations().then(registrations=>{for(let registration of registrations){registration.unregister()}})}localStorage.clear();sessionStorage.clear();localStorage.setItem("app_version",serverVersion);window.location.reload(true)}else{localStorage.setItem("app_version",serverVersion)}}).catch(err=>console.error("[Version Check] Failed:",err))})();let lastKnownVersion=null;async function initUpdateChecker(){try{const storedVersion=localStorage.getItem("blancbeu_version");const storedTimestamp=localStorage.getItem("blancbeu_timestamp");const versionResponse=await fetch("/version.json?t="+Date.now(),{cache:"no-store",headers:{"Cache-Control":"no-cache, no-store, must-revalidate"}});if(versionResponse.ok){const serverVersion=await versionResponse.json();const serverTimestamp=serverVersion.timestamp;lastKnownVersion=serverVersion;const isFirstLoad=!storedVersion||!storedTimestamp;const hasNewerVersion=serverTimestamp>parseInt(storedTimestamp||0);if(isFirstLoad){console.log("ðŸŽ‰ First time load - caching version",serverVersion.version);localStorage.setItem("blancbeu_version",serverVersion.version);localStorage.setItem("blancbeu_timestamp",serverTimestamp)}else if(hasNewerVersion){console.warn("ðŸ”„ Newer version detected! Clearing cache and reloading...");console.log("Old version:",storedVersion,"| New version:",serverVersion.version);await clearAllCacheAndCookies();localStorage.setItem("blancbeu_version",serverVersion.version);localStorage.setItem("blancbeu_timestamp",serverTimestamp);if(navigator.serviceWorker&&navigator.serviceWorker.controller){navigator.serviceWorker.controller.postMessage({type:"CLEAR_CACHE"})}window.location.reload(true)}else{console.log("âœ… Cache is fresh - version",storedVersion);localStorage.setItem("blancbeu_version",serverVersion.version)}}}catch(error){console.log("â„¹ï¸ Could not check for updates:",error.message)}}async function clearAllCacheAndCookies(){try{document.cookie.split(";").forEach(c=>{document.cookie=c.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")});const versionData={version:localStorage.getItem("blancbeu_version"),timestamp:localStorage.getItem("blancbeu_timestamp"),theme:localStorage.getItem("theme")};localStorage.clear();localStorage.setItem("blancbeu_version",versionData.version);localStorage.setItem("blancbeu_timestamp",versionData.timestamp);if(versionData.theme){localStorage.setItem("theme",versionData.theme)}sessionStorage.clear();if("caches"in window){const cacheNames=await caches.keys();await Promise.all(cacheNames.map(cacheName=>caches.delete(cacheName)))}console.log("âœ¨ All cache and cookies cleared!")}catch(error){console.error("Error clearing cache:",error)}}const servicesData={groups:[{group:"Hair cutting",icon:"âœ‚ï¸",image:"assets/service_images/professional_hair_st_3fab25e9.webp",services:[{name:"Plain Haircut",price:100,offerPrice:99},{name:"U-Cut",price:150,offerPrice:99},{name:"V-Cut",price:150,offerPrice:99},{name:"Deep U-Cut",price:200,offerPrice:99},{name:"Deep V-Cut",price:200,offerPrice:99},{name:"Step Cut",price:300,offerPrice:99},{name:"Layer Cut",price:500,offerPrice:99},{name:"Butterfly Cut",price:500,offerPrice:99},{name:"Bob Cut",price:400,offerPrice:99},{name:"Baby Cut",price:200,offerPrice:99},{name:"Advance Haircut",price:600,offerPrice:99},{name:"Feather Cut",price:450,offerPrice:99},{name:"Pixie Cut",price:500,offerPrice:99}]},{group:"Clean up",icon:"âœ¨",image:"assets/service_images/beautiful_woman_gett_9dc7243a.webp",services:[{name:"Fruit Cleanup",price:500,offerPrice:250},{name:"Diamond Cleanup",price:800,offerPrice:499},{name:"Gold Cleanup",price:1e3,offerPrice:599},{name:"Charcoal Cleanup",price:700,offerPrice:399}]},{group:"Facial",icon:"ðŸ’†",image:"assets/service_images/facial_new.webp",services:[{name:"Lotus Professional Facial",price:1500,offerPrice:699},{name:"03+ Facial",price:1500,offerPrice:699},{name:"Fruit Facial",price:1200,offerPrice:599},{name:"Gold Facial",price:2e3,offerPrice:999},{name:"Diamond Facial",price:2500,offerPrice:1299},{name:"Anti-Aging Facial",price:2200,offerPrice:1199}]},{group:"Hairs & Treatment",icon:"ðŸ’‡",image:"assets/service_images/professional_hair_st_673b25ad.webp",services:[{name:"Keratin",price:2500,offerPrice:1499},{name:"Straightening/Smoothening",price:3e3,offerPrice:1999},{name:"Botox",price:3500,offerPrice:2499},{name:"Rebounding",price:3500,offerPrice:2400},{name:"Nanoplastia",price:7e3,offerPrice:2999},{name:"Hair Spa",price:1500,offerPrice:799},{name:"Protein Treatment",price:2e3,offerPrice:1199},{name:"Anti-Dandruff Treatment",price:1800,offerPrice:999}]},{group:"Premium services",icon:"ðŸ‘‘",image:"assets/service_images/premium_hair_spa_nourish.webp",services:[{name:"Head Massage",price:250,offerPrice:199},{name:"Deep Nourish HairSpa",price:1500,offerPrice:799},{name:"Full Body Massage",price:5e3,offerPrice:999},{name:"Blow Dry",price:500,offerPrice:199},{name:"Aroma Therapy",price:3e3,offerPrice:1499},{name:"Hot Stone Massage",price:3500,offerPrice:1799},{name:"Thai Massage",price:4e3,offerPrice:1999}]},{group:"Hair colour",icon:"ðŸŽ¨",image:"assets/service_images/hair_colour_vibrant_pink.webp",services:[{name:"Global Hair Colour",price:1199,offerPrice:null},{name:"Global Highlight",price:1299,offerPrice:null},{name:"Highlight Perstrik",price:149,offerPrice:null},{name:"Balayage",price:2500,offerPrice:1999},{name:"Ombre",price:2200,offerPrice:1799},{name:"Root Touch-Up",price:599,offerPrice:399}]},{group:"Makeup & Styling",icon:"ðŸ’„",image:"assets/service_images/makeup_styling_new.webp",services:[{name:"Party Makeup",price:2e3,offerPrice:1499},{name:"Bridal Makeup",price:8e3,offerPrice:5999},{name:"HD Makeup",price:3500,offerPrice:2499},{name:"Airbrush Makeup",price:4e3,offerPrice:2999},{name:"Pre-Bridal Package",price:15e3,offerPrice:9999}]},{group:"Nails & Beauty",icon:"ðŸ’…",image:"assets/service_images/nails_beauty_vibrant.webp",services:[{name:"Manicure",price:500,offerPrice:299},{name:"Pedicure",price:600,offerPrice:349},{name:"Gel Nails",price:1500,offerPrice:999},{name:"Nail Art",price:800,offerPrice:499},{name:"Threading",price:100,offerPrice:50},{name:"Waxing Full Arms",price:400,offerPrice:299},{name:"Waxing Full Legs",price:600,offerPrice:399}]}]};const reviewsData=[{reviewer_name:"Nikita Kumari",reviewer_details:"1 review",rating_hearts:5,review_date:"a month ago",review_text:"I recently visited BlancBeu Family beauty salon for a haircut and highlights, and I'm very impressed with the overall experience. The salon is beautiful and well-maintained!"},{reviewer_name:"Parwati Lohar",reviewer_details:"2 reviews",rating_hearts:5,review_date:"9 month ago",review_text:"It was my first time visiting this salon, and I was nervous - but they made me feel so comfortable! The beautician listened to me patiently and suggested the perfect style."},{reviewer_name:"Rajendra Kumar Lohra",reviewer_details:"2 reviews",rating_hearts:5,review_date:"a month ago",review_text:"My wife loves this place. She got her haircut and facial done that was awesome all service is wow! I've never been so happy with them. I'd highly recommend!"},{reviewer_name:"Ujala Oraon",reviewer_details:"4 reviews",rating_hearts:5,review_date:"5 days ago",review_text:"Best service... I done my cleanup.. Thank you blanc beu"},{reviewer_name:"Fehran Saifi",reviewer_details:"1 review",rating_hearts:5,review_date:"a month ago",review_text:"Highly recommended, all services are premium and result was very good in behaviour.. maine waha global highlight karwaya ðŸ˜ðŸ˜ðŸ˜â¤ï¸"},{reviewer_name:"Aditi Singh",reviewer_details:"5 reviews",rating_hearts:5,review_date:"2 months ago",review_text:"Such a great place! I was glad to have your pampering sessions, recently visited there, felt so comfortable..."}];let currentSlide=0;let carouselInterval;function initCarousel(){const dots=document.getElementById("carouselDots");const slides=document.querySelectorAll(".carousel-slide");console.log(`ðŸŽ  Carousel initialized with ${slides.length} slides`);slides.forEach((_,index)=>{const dot=document.createElement("div");dot.className="dot";if(index===0)dot.classList.add("active");dot.onclick=()=>goToSlide(index);dots.appendChild(dot)});startAutoPlay()}function startAutoPlay(){console.log("â–¶ï¸ Starting carousel auto-play");carouselInterval=setInterval(()=>{moveCarousel(1)},8e3)}function moveCarousel(direction){const slides=document.querySelectorAll(".carousel-slide");const dots=document.querySelectorAll(".dot");console.log(`ðŸ”„ Moving carousel: current=${currentSlide}, direction=${direction}`);slides[currentSlide].classList.remove("active");dots[currentSlide].classList.remove("active");currentSlide=(currentSlide+direction+slides.length)%slides.length;console.log(`âœ… New slide: ${currentSlide}`);slides[currentSlide].classList.add("active");dots[currentSlide].classList.add("active");clearInterval(carouselInterval);startAutoPlay()}function goToSlide(index){const slides=document.querySelectorAll(".carousel-slide");const dots=document.querySelectorAll(".dot");slides[currentSlide].classList.remove("active");dots[currentSlide].classList.remove("active");currentSlide=index;slides[currentSlide].classList.add("active");dots[currentSlide].classList.add("active");clearInterval(carouselInterval);startAutoPlay()}function renderReviews(){const container=document.getElementById("reviewsContainer");if(!container)return;reviewsData.forEach(review=>{const reviewCard=document.createElement("div");reviewCard.className="review-card";const stars="â˜…".repeat(review.rating_hearts||5);reviewCard.innerHTML=`\n      <div class="review-header">\n        <div class="reviewer-info">\n          <h4>${review.reviewer_name}</h4>\n          <p class="reviewer-details">${review.reviewer_details}</p>\n        </div>\n        <div class="rating">\n          ${stars.split("").map(star=>`<span class="star">${star}</span>`).join("")}\n        </div>\n      </div>\n      <p class="review-text">${review.review_text}</p>\n      <p class="review-date">${review.review_date}</p>\n    `;container.appendChild(reviewCard)})}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){const href=this.getAttribute("href");if(href==="#"||href==="")return;e.preventDefault();const target=document.querySelector(href);if(target){target.scrollIntoView({behavior:"smooth",block:"start"})}})})}function showTC(){const modal=document.getElementById("tcModal");modal.style.display="block";document.body.style.overflow="hidden"}function closeTC(){const modal=document.getElementById("tcModal");modal.style.display="none";document.body.style.overflow="auto"}window.onclick=function(event){const modal=document.getElementById("tcModal");if(event.target===modal){modal.style.display="none";document.body.style.overflow="auto"}};class ScrollBehaviorManager{constructor(){this.lastScroll=0;this.scrollThreshold=5;this.header=null;this.bottomNav=null;this.fireworksResumeTimer=null;this.isScrolling=false;this.fireworksWerePausedByScroll=false;this.ticking=false}init(){this.header=document.getElementById("mainHeader");this.bottomNav=document.getElementById("bottomNav");if(!this.header){console.warn("âŒ Header element not found - navbar auto-hide disabled")}if(!this.bottomNav){console.warn("âŒ Bottom nav element not found - bottom nav auto-hide disabled")}window.addEventListener("scroll",this.onScroll.bind(this),{passive:true})}onScroll(){if(!this.ticking){window.requestAnimationFrame(()=>{this.handleScroll();this.ticking=false});this.ticking=true}}handleScroll(){const currentScroll=window.pageYOffset||document.documentElement.scrollTop;this.updateNavbarVisibility(currentScroll);this.handleFireworksScroll();this.lastScroll=currentScroll}updateNavbarVisibility(currentScroll){const windowHeight=window.innerHeight;const documentHeight=document.documentElement.scrollHeight;const isAtBottom=currentScroll+windowHeight>=documentHeight-50;if(isAtBottom){if(this.bottomNav)this.bottomNav.classList.remove("hidden")}}handleFireworksScroll(){if(typeof togglePause!=="function"||typeof store==="undefined"){return}if(!this.isScrolling){this.isScrolling=true;const wasAlreadyPaused=store.state&&store.state.paused;if(!wasAlreadyPaused){this.fireworksWerePausedByScroll=true;togglePause(true)}else{this.fireworksWerePausedByScroll=false}}clearTimeout(this.fireworksResumeTimer);this.fireworksResumeTimer=setTimeout(()=>{this.isScrolling=false;if(this.fireworksWerePausedByScroll){togglePause(false);this.fireworksWerePausedByScroll=false}},500)}}function initScrollBehavior(){const scrollManager=new ScrollBehaviorManager;scrollManager.init()}document.addEventListener("DOMContentLoaded",()=>{initCarousel();renderServices();renderReviews();initServiceFiltering();initSmoothScroll();initScrollBehavior()});let deferredPrompt;let installButton;function showBrowserSpecificInstructions(){const isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;const isFirefox=/Firefox/.test(navigator.userAgent);const isSafari=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);let message="";if(isIOS||isSafari){message='To install this app:\n\n1. Tap the Share button (box with arrow)\n2. Scroll down and tap "Add to Home Screen"\n3. Tap "Add" in the top right corner'}else if(isFirefox){message='To install this app:\n\n1. Tap the menu button (three dots)\n2. Tap "Install"\n3. Follow the prompts to add to home screen'}else{message="To install this app:\n\nPlease use your browser's menu to add this website to your home screen."}alert(message)}function hideInstallPromotion(){const banner=document.querySelector(".install-banner");if(banner){banner.classList.remove("show");setTimeout(()=>{banner.remove()},300)}installButton=null}function checkIfStandalone(){const isStandalone=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===true||document.referrer.includes("android-app://");if(isStandalone){console.log("ðŸŽ‰ App is running in standalone (installed) mode");sessionStorage.setItem("appInstalled","true");sessionStorage.setItem("isStandalone","true");showSplashScreen();updateInstallButtonVisibility()}return isStandalone}function showSplashScreen(){const splash=document.getElementById("pwaSplash");if(splash){splash.classList.remove("hidden");setTimeout(()=>{hideSplashScreen()},2500)}}function hideSplashScreen(){const splash=document.getElementById("pwaSplash");if(splash){splash.classList.add("hidden")}}window.addEventListener("load",()=>{});class BottomNavController{constructor(){this.bottomNav=document.getElementById("bottomNav");this.navItems=document.querySelectorAll(".nav-item");this.ticking=false;this.sections=[];this.init()}init(){if(!this.bottomNav){console.log("âŒ Bottom nav element not found");return}console.log("âœ… Bottom nav controller initialized (scrollspy only)");this.initSections();window.addEventListener("scroll",this.handleScroll.bind(this),{passive:true});window.addEventListener("hashchange",this.handleHashChange.bind(this));this.navItems.forEach(item=>{item.addEventListener("click",this.handleNavClick.bind(this))});this.updateActiveState()}initSections(){const sectionIds=["home","offers","services","gallery","reviews"];this.sections=sectionIds.map(id=>document.getElementById(id)).filter(section=>section!==null).map(section=>({id:section.id,element:section,offsetTop:section.offsetTop,offsetBottom:section.offsetTop+section.offsetHeight}))}handleScroll(){if(!this.ticking){window.requestAnimationFrame(()=>{this.updateActiveState();this.ticking=false});this.ticking=true}}updateActiveState(){const scrollPosition=window.scrollY+window.innerHeight/3;let currentSection=this.sections[0]?.id||"home";for(const section of this.sections){if(scrollPosition>=section.offsetTop){currentSection=section.id}}this.navItems.forEach(item=>{const page=item.getAttribute("data-page");if(page===currentSection){item.classList.add("active")}else{item.classList.remove("active")}})}handleHashChange(){const hash=window.location.hash.slice(1);this.setActivePage(hash||"home")}handleNavClick(event){const item=event.currentTarget;const page=item.getAttribute("data-page");if(item.getAttribute("href").startsWith("http")){return}const section=document.getElementById(page);if(section){event.preventDefault();const offsetTop=section.offsetTop-80;window.scrollTo({top:offsetTop,behavior:"smooth"});history.pushState(null,"",`#${page}`);this.setActivePage(page)}}setActivePage(page){this.navItems.forEach(item=>{const itemPage=item.getAttribute("data-page");if(itemPage===page){item.classList.add("active")}else{item.classList.remove("active")}})}}class OfferCardAnimationController{constructor(){this.offerCards=document.querySelectorAll(".offer-card");this.init()}init(){if(!this.offerCards.length)return;const observerOptions={root:null,rootMargin:"0px 0px -100px 0px",threshold:.1};const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("animate")}else{entry.target.classList.remove("animate")}})},observerOptions);this.offerCards.forEach(card=>observer.observe(card))}}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{new OfferCardAnimationController})}else{new OfferCardAnimationController}class ThemeController{constructor(){this.html=document.documentElement;this.body=document.body;this.init()}init(){const savedTheme=localStorage.getItem("theme");if(savedTheme==="dark"){this.enableDarkMode()}else{this.enableLightMode()}document.addEventListener("click",e=>{const toggleBtn=e.target.closest("#themeToggle");if(toggleBtn){e.preventDefault();this.toggleTheme()}});console.log("âœ… ThemeController Initialized")}toggleTheme(){const currentTheme=this.html.getAttribute("data-theme");if(currentTheme==="light"){this.enableDarkMode();localStorage.setItem("theme","dark")}else{this.enableLightMode();localStorage.setItem("theme","light")}}enableLightMode(){this.html.setAttribute("data-theme","light");this.body.classList.add("light-mode");document.querySelector('meta[name="theme-color"]')?.setAttribute("content","#fef5e7")}enableDarkMode(){this.html.removeAttribute("data-theme");this.body.classList.remove("light-mode");document.querySelector('meta[name="theme-color"]')?.setAttribute("content","#000000")}}new ThemeController;if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{new ThemeController})}else{new ThemeController}class AppShellNavigator{constructor(){this.currentPage="home";this.contentArea=document.getElementById("appContent");this.bottomNav=document.getElementById("bottomNav");this.pageScrollPositions={};this.init()}init(){const navItems=this.bottomNav.querySelectorAll(".nav-item");navItems.forEach(item=>{item.addEventListener("click",e=>{const isExternalLink=item.href&&item.href.includes("wa.me");if(!isExternalLink){e.preventDefault();const page=item.getAttribute("data-page");this.navigateTo(page)}})});window.addEventListener("hashchange",()=>{const hash=window.location.hash.slice(1);if(hash){this.navigateTo(hash)}});window.addEventListener("scroll",()=>{this.pageScrollPositions[this.currentPage]=window.scrollY;console.log(`ðŸ“ Page scroll saved - ${this.currentPage}: ${window.scrollY}px`)},{passive:true});const initialHash=window.location.hash.slice(1);if(initialHash){setTimeout(()=>this.navigateTo(initialHash),100)}}navigateTo(page){if(!page||page==="")page="home";const mainHeader=document.getElementById("mainHeader");if(mainHeader){if(page==="login"){mainHeader.classList.add("force-solid-header")}else{mainHeader.classList.remove("force-solid-header")}}if(page===this.currentPage){window.scrollTo(0,0);console.log(`â¬†ï¸ Same page, scrolling to top`);return}this.pageScrollPositions[this.currentPage]=window.scrollY;console.log(`ðŸ’¾ Saved ${this.currentPage} at: ${this.pageScrollPositions[this.currentPage]}px`);const currentPages=this.contentArea.querySelectorAll(`[data-page="${this.currentPage}"]`);currentPages.forEach(el=>el.classList.remove("active"));const newPages=this.contentArea.querySelectorAll(`[data-page="${page}"]`);newPages.forEach(el=>el.classList.add("active"));const navItems=this.bottomNav.querySelectorAll(".nav-item");navItems.forEach(item=>{if(item.getAttribute("data-page")===page){item.classList.add("active")}else{item.classList.remove("active")}});this.currentPage=page;const savedPosition=this.pageScrollPositions[page]||0;requestAnimationFrame(()=>{window.scrollTo(0,savedPosition);console.log(`ðŸ”„ Restored ${page} to: ${savedPosition}px`)})}}if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",()=>{initNotificationsController();initBookingsController();if(typeof initServicesPage==="function")initServicesPage()})}else{initNotificationsController();initBookingsController()}function initNotificationsController(){const filterBtns=document.querySelectorAll(".filter-btn");const notificationCards=document.querySelectorAll(".notification-card");const dismissBtns=document.querySelectorAll(".dismiss-btn");const actionBtns=document.querySelectorAll(".action-btn");const quickActionChips=document.querySelectorAll(".quick-action-chip");const settingsBtn=document.querySelector(".notifications-settings-btn");filterBtns.forEach(btn=>{btn.addEventListener("click",()=>{const filter=btn.getAttribute("data-filter");filterBtns.forEach(b=>b.classList.remove("active"));btn.classList.add("active");let visibleCount=0;notificationCards.forEach(card=>{const cardType=card.getAttribute("data-type");if(filter==="all"||cardType===filter){card.style.display="flex";visibleCount++}else{card.style.display="none"}});checkEmptyState();console.log(`ðŸ” Filtered to '${filter}' - ${visibleCount} notifications visible`)})});dismissBtns.forEach(btn=>{btn.addEventListener("click",e=>{e.stopPropagation();const card=btn.closest(".notification-card");card.style.animation="slideOutNotification 0.3s ease-out forwards";setTimeout(()=>{card.remove();checkEmptyState();console.log("ðŸ—‘ï¸ Notification dismissed")},300)})});actionBtns.forEach(btn=>{btn.addEventListener("click",e=>{e.stopPropagation();if(btn.classList.contains("dismiss-btn"))return;btn.style.transform="scale(0.95)";setTimeout(()=>{btn.style.transform=""},200)})});quickActionChips.forEach(chip=>{chip.addEventListener("click",()=>{const action=chip.getAttribute("data-action");if(action==="mark-all-read"){notificationCards.forEach(card=>{card.setAttribute("data-unread","false");card.style.animation="slideInNotification 0.3s ease-out"});console.log("âœ… All marked as read")}else if(action==="clear-all"){notificationCards.forEach(card=>{card.style.animation="slideOutNotification 0.3s ease-out forwards";setTimeout(()=>card.remove(),300)});setTimeout(checkEmptyState,300);console.log("ðŸ—‘ï¸ All notifications cleared")}})});if(settingsBtn){settingsBtn.addEventListener("click",()=>{alert("âš™ï¸ Notification settings coming soon!")})}if(!document.querySelector("style[data-notif-anim]")){const style=document.createElement("style");style.setAttribute("data-notif-anim","true");style.textContent=`\n            @keyframes slideOutNotification {\n                from {\n                    opacity: 1;\n                    transform: translateX(0);\n                }\n                to {\n                    opacity: 0;\n                    transform: translateX(100%);\n                }\n            }\n        `;document.head.appendChild(style)}function checkEmptyState(){const allCards=document.querySelectorAll(".notification-card");const emptyState=document.querySelector(".notifications-container .empty-state");if(allCards.length===0&&emptyState){emptyState.style.display="block"}else if(emptyState){emptyState.style.display="none"}}console.log("âœ… Notifications controller initialized with enhanced features")}function initBookingsController(){const bookingTabs=document.querySelectorAll(".booking-tab");const bookingCards=document.querySelectorAll(".booking-card");const actionBtns=document.querySelectorAll(".booking-action-btn");const filterBtn=document.querySelector(".bookings-filter-btn");bookingTabs.forEach(tab=>{tab.addEventListener("click",()=>{const status=tab.getAttribute("data-status");bookingTabs.forEach(t=>t.classList.remove("active"));tab.classList.add("active");let visibleCount=0;bookingCards.forEach(card=>{const cardStatus=card.getAttribute("data-status");if(status==="all"||cardStatus===status){card.style.display="flex";visibleCount++}else{card.style.display="none"}});checkEmptyBookings();console.log(`ðŸ“… Filtered to '${status}' - ${visibleCount} bookings visible`)})});actionBtns.forEach(btn=>{btn.addEventListener("click",e=>{e.stopPropagation();const btnText=btn.textContent;btn.style.transform="scale(0.95)";setTimeout(()=>{btn.style.transform=""},200);if(btnText.includes("Cancel")){if(confirm("Are you sure you want to cancel this booking?")){btn.closest(".booking-card").style.animation="slideOutNotification 0.3s ease-out forwards";setTimeout(()=>{btn.closest(".booking-card").remove();checkEmptyBookings()},300)}}else if(btnText.includes("Reschedule")){alert("ðŸ“… Reschedule feature coming soon!")}else if(btnText.includes("Rebook")){alert("âœ… Rebook feature coming soon!")}else if(btnText.includes("Details")){alert("ðŸ“‹ Booking details coming soon!")}})});if(filterBtn){filterBtn.addEventListener("click",()=>{alert("ðŸ” Advanced filters coming soon!")})}function checkEmptyBookings(){const visibleCards=document.querySelectorAll('.booking-card[style*="display: flex"], .booking-card:not([style*="display: none"])');const emptyState=document.querySelector(".empty-state-bookings");if(visibleCards.length===0&&emptyState){emptyState.style.display="block"}else if(emptyState){emptyState.style.display="none"}}console.log("âœ… Bookings controller initialized")}function openBlancbeuMaps(){window.open("https://maps.app.goo.gl/WYxp5QuhjXEiBaXE9","_blank")}function openWhatsAppChat(){window.open("https://wa.me/919229915277","_blank")}document.addEventListener("DOMContentLoaded",function(){const heroLines=document.querySelectorAll(".hero-text-line");heroLines.forEach((line,index)=>{line.style.opacity="1";line.style.visibility="visible";line.style.display="block";line.style.color="#FFD700";line.style.WebkitTextFillColor="#FFD700";setTimeout(()=>{line.style.opacity="1"},200+index*200)});const heroSection=document.querySelector(".hero-text-section");if(heroSection){heroSection.style.opacity="1";heroSection.style.visibility="visible";heroSection.style.display="block"}});function animateCounters(){const statNumbers=document.querySelectorAll(".stat-number");statNumbers.forEach(element=>{const targetValue=parseInt(element.getAttribute("data-value"));let currentValue=0;const duration=2e3;const increment=targetValue/(duration/50);const timer=setInterval(()=>{currentValue+=increment;if(currentValue>=targetValue){currentValue=targetValue;clearInterval(timer);element.textContent=Math.floor(currentValue).toLocaleString()+"+"}else{element.textContent=Math.floor(currentValue).toLocaleString()}},50)})}function setupCounterAnimation(){const trustSection=document.querySelector(".trust-section");if(!trustSection)return;const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){animateCounters();observer.unobserve(entry.target)}})},{threshold:.5});observer.observe(trustSection)}document.addEventListener("DOMContentLoaded",setupCounterAnimation);let serviceCarouselPosition=0;function slideServiceCarousel(direction){const carousel=document.getElementById("serviceCarouselTrack");if(!carousel)return;const items=carousel.querySelectorAll(".service-card-item");if(items.length===0)return;const itemWidth=items[0].offsetWidth+20;const containerWidth=carousel.parentElement.offsetWidth;const visibleItems=Math.floor(containerWidth/itemWidth);const maxPosition=Math.max(0,items.length-visibleItems);serviceCarouselPosition+=direction;if(serviceCarouselPosition<0)serviceCarouselPosition=0;if(serviceCarouselPosition>maxPosition)serviceCarouselPosition=maxPosition;carousel.style.transform=`translateX(-${serviceCarouselPosition*itemWidth}px)`}document.addEventListener("DOMContentLoaded",()=>{const carousel=document.getElementById("serviceCarouselTrack");if(carousel){window.addEventListener("resize",()=>{const items=carousel.querySelectorAll(".service-card-item");const itemWidth=items[0].offsetWidth+20;const containerWidth=carousel.parentElement.offsetWidth;const visibleItems=Math.floor(containerWidth/itemWidth);const maxPosition=Math.max(0,items.length-visibleItems);if(serviceCarouselPosition>maxPosition){serviceCarouselPosition=maxPosition;carousel.style.transform=`translateX(-${serviceCarouselPosition*itemWidth}px)`}})}});let testimonialPosition=0;function slideTestimonial(direction){const track=document.getElementById("testimonialTrack");if(!track)return;const items=track.querySelectorAll(".testimonial-card-item");testimonialPosition+=direction;if(testimonialPosition<0)testimonialPosition=items.length-1;if(testimonialPosition>=items.length)testimonialPosition=0;track.style.transform=`translateX(-${testimonialPosition*100}%)`}document.addEventListener("DOMContentLoaded",()=>{setInterval(()=>{if(document.getElementById("testimonialTrack")){slideTestimonial(1)}},8e3)});let baCurrentSlide=0;let baFilteredSlides=[];let baAutoPlayInterval=null;function initBeforeAfterGallery(){const slides=document.querySelectorAll(".ba-slide");const dotsContainer=document.getElementById("baDots");const filterBtns=document.querySelectorAll(".ba-filter-btn");if(!slides.length||!dotsContainer)return;baFilteredSlides=Array.from(slides);slides.forEach((_,index)=>{const dot=document.createElement("div");dot.className=`ba-dot ${index===0?"active":""}`;dot.onclick=()=>goToBASlide(index);dotsContainer.appendChild(dot)});filterBtns.forEach(btn=>{btn.addEventListener("click",()=>{const category=btn.dataset.category;filterBtns.forEach(b=>b.classList.remove("active"));btn.classList.add("active");filterBASlides(category)})});initComparisonSliders();baAutoPlayInterval=setInterval(()=>slideBA(1),6e3)}function filterBASlides(category){const slides=document.querySelectorAll(".ba-slide");const dotsContainer=document.getElementById("baDots");baCurrentSlide=0;baFilteredSlides=[];slides.forEach(slide=>{if(category==="all"||slide.dataset.category===category){baFilteredSlides.push(slide)}slide.classList.remove("active")});if(baFilteredSlides.length>0){baFilteredSlides[0].classList.add("active")}dotsContainer.innerHTML="";baFilteredSlides.forEach((_,index)=>{const dot=document.createElement("div");dot.className=`ba-dot ${index===0?"active":""}`;dot.onclick=()=>goToBASlide(index);dotsContainer.appendChild(dot)})}function slideBA(direction){if(baFilteredSlides.length===0){baFilteredSlides=Array.from(document.querySelectorAll(".ba-slide"))}baFilteredSlides[baCurrentSlide].classList.remove("active");baCurrentSlide+=direction;if(baCurrentSlide<0)baCurrentSlide=baFilteredSlides.length-1;if(baCurrentSlide>=baFilteredSlides.length)baCurrentSlide=0;baFilteredSlides[baCurrentSlide].classList.add("active");updateBADots()}window.slideBA=slideBA;function goToBASlide(index){baFilteredSlides[baCurrentSlide].classList.remove("active");baCurrentSlide=index;baFilteredSlides[baCurrentSlide].classList.add("active");updateBADots()}function updateBADots(){const dots=document.querySelectorAll(".ba-dot");dots.forEach((dot,index)=>{dot.classList.toggle("active",index===baCurrentSlide)})}function initComparisonSliders(){const sliders=document.querySelectorAll(".comparison-slider");sliders.forEach(slider=>{const handle=slider.querySelector(".slider-handle");const beforeImg=slider.querySelector(".before-img");const beforeLabel=slider.querySelector(".before-label");const afterLabel=slider.querySelector(".after-label");let isDragging=false;let startX=0;let startY=0;let isGestureLocked=false;let isHorizontalSwipe=false;function updateSlider(e){if(e.type==="touchmove"){if(!isDragging)return;if(!isGestureLocked){const currentX=e.touches[0].clientX;const currentY=e.touches[0].clientY;const diffX=Math.abs(currentX-startX);const diffY=Math.abs(currentY-startY);if(diffX>5||diffY>5){isGestureLocked=true;if(diffX>diffY){isHorizontalSwipe=true}else{isHorizontalSwipe=false;isDragging=false;return}}else{return}}if(!isHorizontalSwipe){isDragging=false;return}if(e.cancelable)e.preventDefault()}else{if(!isDragging)return;e.preventDefault()}const rect=slider.getBoundingClientRect();let x=(e.clientX||e.touches[0].clientX)-rect.left;let percentage=x/rect.width*100;percentage=Math.max(0,Math.min(100,percentage));beforeImg.style.clipPath=`inset(0 ${100-percentage}% 0 0)`;handle.style.left=`${percentage}%`;const handleX=percentage/100*rect.width;if(beforeLabel){const labelLeft=beforeLabel.offsetLeft;const labelWidth=beforeLabel.offsetWidth;let clipRightP=(labelWidth-(handleX-labelLeft))/labelWidth*100;clipRightP=Math.max(0,Math.min(100,clipRightP));beforeLabel.style.clipPath=`inset(0 ${clipRightP}% 0 0)`}if(afterLabel){const labelLeft=afterLabel.offsetLeft;const labelWidth=afterLabel.offsetWidth;let clipLeftP=(handleX-labelLeft)/labelWidth*100;clipLeftP=Math.max(0,Math.min(100,clipLeftP));afterLabel.style.clipPath=`inset(0 0 0 ${clipLeftP}%)`}}function startDrag(e){isDragging=true;if(baAutoPlayInterval){clearInterval(baAutoPlayInterval);baAutoPlayInterval=null}if(e.type==="touchstart"){startX=e.touches[0].clientX;startY=e.touches[0].clientY;isGestureLocked=false;isHorizontalSwipe=false}else{e.preventDefault()}}function endDrag(){isDragging=false;isGestureLocked=false}handle.addEventListener("mousedown",startDrag);slider.addEventListener("mousedown",startDrag);document.addEventListener("mousemove",updateSlider);document.addEventListener("mouseup",endDrag);handle.addEventListener("touchstart",startDrag,{passive:false});slider.addEventListener("touchstart",startDrag,{passive:false});document.addEventListener("touchmove",updateSlider,{passive:false});document.addEventListener("touchend",endDrag)})}document.addEventListener("DOMContentLoaded",()=>{new GalleryController});document.addEventListener("DOMContentLoaded",initBeforeAfterGallery);let staffPosition=0;function slideStaff(direction){const carousel=document.getElementById("staffCarousel");if(!carousel)return;const cards=carousel.querySelectorAll(".staff-card");if(cards.length===0)return;const cardWidth=cards[0].offsetWidth+30;const containerWidth=carousel.parentElement.offsetWidth;const visibleCards=Math.floor(containerWidth/cardWidth);const maxPosition=Math.max(0,cards.length-visibleCards);staffPosition+=direction;if(staffPosition<0)staffPosition=0;if(staffPosition>maxPosition)staffPosition=maxPosition;carousel.style.transform=`translateX(-${staffPosition*cardWidth}px)`}document.addEventListener("DOMContentLoaded",()=>{setInterval(()=>{const carousel=document.getElementById("staffCarousel");if(carousel){const cards=carousel.querySelectorAll(".staff-card");const containerWidth=carousel.parentElement.offsetWidth;const cardWidth=cards[0]?.offsetWidth+30||310;const visibleCards=Math.floor(containerWidth/cardWidth);const maxPosition=Math.max(0,cards.length-visibleCards);staffPosition++;if(staffPosition>maxPosition)staffPosition=0;carousel.style.transform=`translateX(-${staffPosition*cardWidth}px)`}},5e3);initStaffCarouselSwipe()});function initStaffCarouselSwipe(){const carousel=document.getElementById("staffCarousel");if(!carousel)return;let touchStartX=0;let touchEndX=0;let touchStartY=0;let touchEndY=0;const minSwipeDistance=50;carousel.addEventListener("touchstart",e=>{touchStartX=e.touches[0].clientX;touchStartY=e.touches[0].clientY},{passive:true});carousel.addEventListener("touchend",e=>{touchEndX=e.changedTouches[0].clientX;touchEndY=e.changedTouches[0].clientY;const diffX=touchStartX-touchEndX;const diffY=Math.abs(touchStartY-touchEndY);if(Math.abs(diffX)>diffY&&Math.abs(diffX)>minSwipeDistance){if(diffX>0){slideStaff(1)}else{slideStaff(-1)}}},{passive:true})}function initSavingsCalculator(){const slider=document.getElementById("monthlySpendSlider");const spendValue=document.getElementById("spendValue");const goldSavings=document.getElementById("goldSavings");const platinumSavings=document.getElementById("platinumSavings");const diamondSavings=document.getElementById("diamondSavings");if(!slider)return;const membershipCosts={gold:999,platinum:2499,diamond:4999};const discountRates={gold:.05,platinum:.15,diamond:.25};function calculateSavings(monthlySpend){const yearlySpend=monthlySpend*12;const goldYearlySavings=yearlySpend*discountRates.gold-membershipCosts.gold;const platinumYearlySavings=yearlySpend*discountRates.platinum-membershipCosts.platinum;const diamondYearlySavings=yearlySpend*discountRates.diamond-membershipCosts.diamond;return{gold:Math.max(0,Math.round(goldYearlySavings)),platinum:Math.max(0,Math.round(platinumYearlySavings)),diamond:Math.max(0,Math.round(diamondYearlySavings))}}function updateDisplay(){const monthlySpend=parseInt(slider.value);spendValue.textContent=`â‚¹${monthlySpend.toLocaleString("en-IN")}`;const savings=calculateSavings(monthlySpend);goldSavings.textContent=`â‚¹${savings.gold.toLocaleString("en-IN")}/yr`;platinumSavings.textContent=`â‚¹${savings.platinum.toLocaleString("en-IN")}/yr`;diamondSavings.textContent=`â‚¹${savings.diamond.toLocaleString("en-IN")}/yr`}slider.addEventListener("input",updateDisplay);updateDisplay()}document.addEventListener("DOMContentLoaded",initSavingsCalculator);function createRipple(e){const button=e.currentTarget;const existingRipple=button.querySelector(".ripple");if(existingRipple)existingRipple.remove();const ripple=document.createElement("span");ripple.className="ripple";const rect=button.getBoundingClientRect();const size=Math.max(rect.width,rect.height);const x=e.clientX-rect.left-size/2;const y=e.clientY-rect.top-size/2;ripple.style.cssText=`\n        position: absolute;\n        width: ${size}px;\n        height: ${size}px;\n        left: ${x}px;\n        top: ${y}px;\n        border-radius: 50%;\n        background: radial-gradient(circle, rgba(255,215,0,0.5) 0%, transparent 70%);\n        transform: scale(0);\n        animation: rippleExpand 0.6s ease-out forwards;\n        pointer-events: none;\n    `;button.appendChild(ripple);ripple.addEventListener("animationend",()=>ripple.remove())}class MagneticButton{constructor(element,strength=.3){this.element=element;this.strength=strength;this.bounds=null;this.position={x:0,y:0};this.target={x:0,y:0};this.animating=false;this.element.addEventListener("mouseenter",()=>this.onEnter());this.element.addEventListener("mousemove",e=>this.onMove(e));this.element.addEventListener("mouseleave",()=>this.onLeave())}onEnter(){this.bounds=this.element.getBoundingClientRect();if(!this.animating){this.animating=true;this.animate()}}onMove(e){if(!this.element||!this.element.isConnected)return;this.bounds=this.element.getBoundingClientRect();const centerX=this.bounds.left+this.bounds.width/2;const centerY=this.bounds.top+this.bounds.height/2;this.target.x=(e.clientX-centerX)*this.strength;this.target.y=(e.clientY-centerY)*this.strength}onLeave(){this.target={x:0,y:0}}animate(){this.position.x+=(this.target.x-this.position.x)*.15;this.position.y+=(this.target.y-this.position.y)*.15;this.element.style.transform=`translate(${this.position.x}px, ${this.position.y}px)`;if(Math.abs(this.target.x-this.position.x)>.01||Math.abs(this.target.y-this.position.y)>.01||Math.abs(this.position.x)>.01||Math.abs(this.position.y)>.01){requestAnimationFrame(()=>this.animate())}else{this.animating=false;this.element.style.transform=""}}}class ScrollReveal{constructor(options={}){this.threshold=options.threshold||.15;this.staggerDelay=options.staggerDelay||80;this.init()}init(){const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){let siblingIndex=0;const parent=entry.target.parentElement;if(parent){const siblings=parent.querySelectorAll(".scroll-reveal");siblingIndex=Math.max(0,Array.from(siblings).indexOf(entry.target))}setTimeout(()=>{entry.target.classList.add("visible")},siblingIndex*this.staggerDelay);observer.unobserve(entry.target)}})},{threshold:this.threshold,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".scroll-reveal").forEach(el=>observer.observe(el))}}function initFaqAccordion(){const faqItems=document.querySelectorAll(".faq-item");faqItems.forEach(item=>{const question=item.querySelector(".faq-question");if(!question)return;question.addEventListener("click",()=>{const isActive=item.classList.contains("active");faqItems.forEach(other=>other.classList.remove("active"));if(!isActive){item.classList.add("active")}})})}function initMicroInteractions(){document.querySelectorAll(".hero-btn, .contact-btn, .book-service-btn, .book-staff-btn, .tier-cta-btn, .btn-premium, .ripple-btn").forEach(btn=>{btn.style.position="relative";btn.style.overflow="hidden";btn.addEventListener("click",createRipple)});if(window.matchMedia("(hover: hover)").matches){document.querySelectorAll(".hero-btn:not(.primary-btn), .magnetic-btn").forEach(btn=>{new MagneticButton(btn,.25)})}new ScrollReveal({threshold:.12,staggerDelay:100});initFaqAccordion();console.log("âœ¨ Premium micro-interactions initialized")}function preventGlobalSwipeBack(){let touchStartX=0;let touchStartY=0;document.addEventListener("touchstart",e=>{touchStartX=e.changedTouches[0].clientX;touchStartY=e.changedTouches[0].clientY},{passive:true});document.addEventListener("touchmove",e=>{const touchEndX=e.changedTouches[0].clientX;const touchEndY=e.changedTouches[0].clientY;const diffX=touchEndX-touchStartX;const diffY=touchEndY-touchStartY;if(touchStartX<40&&diffX>5&&Math.abs(diffX)>Math.abs(diffY)){if(e.cancelable){e.preventDefault()}}},{passive:false});console.log("ðŸ›¡ï¸ Global swipe protection active")}function addScrollRevealClasses(){document.querySelectorAll(".trust-card").forEach(card=>{card.classList.add("scroll-reveal","fade-up")});document.querySelectorAll(".feature-card").forEach(card=>{card.classList.add("scroll-reveal","zoom-in")});document.querySelectorAll(".service-card-item").forEach(card=>{card.classList.add("scroll-reveal","fade-up")});document.querySelectorAll(".gallery-item").forEach(item=>{item.classList.add("scroll-reveal","zoom-in")});document.querySelectorAll(".testimonial-card-item").forEach(card=>{card.classList.add("scroll-reveal","fade-up")});document.querySelectorAll(".staff-card").forEach(card=>{card.classList.add("scroll-reveal","fade-up")});document.querySelectorAll(".tier-card").forEach(card=>{card.classList.add("scroll-reveal","zoom-in")});document.querySelectorAll(".faq-item").forEach(item=>{item.classList.add("scroll-reveal","fade-up")});document.querySelectorAll(".section-title").forEach(title=>{title.classList.add("scroll-reveal","fade-up")})}document.addEventListener("DOMContentLoaded",()=>{addScrollRevealClasses();initMicroInteractions();initServiceFilter();initFloatingChatWidget();preventGlobalSwipeBack()});function initServiceFilter(){const filterBar=document.getElementById("serviceFilterBar");if(!filterBar)return;const filterBtns=filterBar.querySelectorAll(".filter-btn");const searchInput=document.getElementById("serviceSearch");const filterCount=document.getElementById("filterCount");const servicesSection=document.getElementById("services");if(!servicesSection)return;const serviceCards=servicesSection.querySelectorAll(".service-card-item");let activeCategory="all";let searchQuery="";let debounceTimer=null;let filterVersion=0;const cardTimers=new Map;filterBtns.forEach(btn=>{btn.addEventListener("click",()=>{activeCategory=btn.dataset.category;filterBtns.forEach(b=>b.classList.remove("active"));btn.classList.add("active");applyFilters()})});if(searchInput){searchInput.addEventListener("input",e=>{clearTimeout(debounceTimer);debounceTimer=setTimeout(()=>{searchQuery=e.target.value.toLowerCase().trim();applyFilters()},300)})}function applyFilters(){filterVersion++;const currentVersion=filterVersion;let visibleCount=0;cardTimers.forEach(timer=>clearTimeout(timer));cardTimers.clear();serviceCards.forEach((card,index)=>{const cardCategory=card.dataset.category||"all";const cardText=card.textContent.toLowerCase();const matchesCategory=activeCategory==="all"||cardCategory===activeCategory;const matchesSearch=searchQuery===""||cardText.includes(searchQuery);const isVisible=matchesCategory&&matchesSearch;if(isVisible){visibleCount++;card.style.display="";card.style.opacity="0";card.style.transform="translateY(20px)";const showTimer=setTimeout(()=>{if(filterVersion===currentVersion){card.style.transition="opacity 0.4s ease, transform 0.4s ease";card.style.opacity="1";card.style.transform="translateY(0)"}},index*50);cardTimers.set(card,showTimer)}else{card.style.transition="opacity 0.3s ease, transform 0.3s ease";card.style.opacity="0";card.style.transform="scale(0.9)";const hideTimer=setTimeout(()=>{if(filterVersion===currentVersion){card.style.display="none"}},300);cardTimers.set(card,hideTimer)}});if(filterCount){filterCount.textContent=`${visibleCount} service${visibleCount!==1?"s":""} found`}}console.log("âœ… Service filter initialized")}function initFloatingChatWidget(){const chatHTML=`\n        <div class="floating-chat-widget" id="floatingChatWidget">\n            <button class="chat-fab" id="chatFab" aria-label="Open chat">\n                <img src="assets/ai_assistant_icon.webp" alt="AI Assistant" class="fab-icon-img">\n                <span class="fab-pulse"></span>\n            </button>\n\n            <div class="chat-window-float" id="chatWindowFloat">\n                <div class="chat-header-float">\n                    <div class="chat-header-info-float">\n                        <img src="assets/brand_icon_optimized.webp" alt="Blancbeu" class="chat-avatar-float">\n                        <div>\n                            <div class="chat-title-float">Blancbeu Support</div>\n                            <div class="chat-status-float"><span class="status-dot"></span>Online now</div>\n                        </div>\n                    </div>\n                    <button class="chat-close-float" id="chatCloseFloat">âœ•</button>\n                </div>\n\n                <div class="chat-messages-float" id="chatMessagesFloat"></div>\n\n                <div class="chat-quick-float" id="chatQuickFloat">\n                    <button class="quick-btn-float" data-action="services">View Services</button>\n                    <button class="quick-btn-float" data-action="booking">Book Now</button>\n                    <button class="quick-btn-float" data-action="hours">Hours</button>\n                    <button class="quick-btn-float" data-action="location">Location</button>\n                </div>\n\n                <div class="chat-input-float">\n                    <input type="text" id="chatInputFloat" placeholder="Type a message...">\n                    <button id="chatSendFloat">âž¤</button>\n                </div>\n            </div>\n        </div>\n    `;const chatCSS=`\n        .floating-chat-widget {\n            position: fixed;\n            bottom: 100px;\n            right: 24px;\n            z-index: 9998;\n        }\n\n        .chat-fab {\n            width: 64px;\n            height: 64px;\n            border-radius: 50%;\n            background: linear-gradient(145deg, var(--gold-primary, #FFD700), var(--gold-dark, #B8860B));\n            border: none;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            box-shadow:\n                0 6px 24px rgba(255, 215, 0, 0.35),\n                0 0 12px rgba(255, 215, 0, 0.2);\n            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n        }\n\n        .chat-fab:hover {\n            transform: scale(1.1);\n            box-shadow:\n                0 10px 35px rgba(255, 215, 0, 0.45),\n                0 0 18px rgba(255, 215, 0, 0.3);\n        }\n\n        .chat-fab:active {\n            transform: scale(1.02);\n        }\n\n        .fab-icon-img {\n            width: 50px;\n            height: 50px;\n            border-radius: 50%;\n            object-fit: cover;\n            z-index: 1;\n            border: 2px solid rgba(255, 255, 255, 0.9);\n            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);\n            transition: transform 0.3s ease;\n        }\n\n        .chat-fab:hover .fab-icon-img {\n            transform: scale(1.03);\n        }\n\n        .fab-pulse {\n            position: absolute;\n            inset: -5px;\n            border-radius: 50%;\n            background: radial-gradient(circle, rgba(255, 215, 0, 0.25) 0%, transparent 70%);\n            animation: fabPulseGlow 2.5s ease-in-out infinite;\n        }\n\n        @keyframes fabPulseGlow {\n            0%, 100% { transform: scale(1); opacity: 0.5; }\n            50% { transform: scale(1.25); opacity: 0; }\n        }\n\n        /* ===== FULLSCREEN CHAT WINDOW ===== */\n        .chat-window-float {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            width: 100%;\n            height: 100%;\n            max-height: 100%;\n            background: var(--bg-primary, #000);\n            overflow: hidden;\n            display: none;\n            flex-direction: column;\n            z-index: 99999;\n        }\n\n        .chat-window-float::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background:\n                radial-gradient(ellipse at 20% 0%, rgba(255, 215, 0, 0.04) 0%, transparent 50%),\n                radial-gradient(ellipse at 80% 100%, rgba(255, 215, 0, 0.03) 0%, transparent 50%);\n            pointer-events: none;\n            z-index: 0;\n        }\n\n        .chat-window-float.open {\n            display: flex;\n            animation: chatWindowOpen 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n        }\n\n        @keyframes chatWindowOpen {\n            0% { opacity: 0; transform: scale(0.95); }\n            100% { opacity: 1; transform: scale(1); }\n        }\n\n        /* ===== HEADER - Matching App Header ===== */\n        .chat-header-float {\n            background: var(--header-bg, rgba(0, 0, 0, 0.98));\n            padding: 16px 20px;\n            padding-top: max(18px, calc(env(safe-area-inset-top) + 6px));\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-shadow: var(--header-shadow, 0 2px 30px rgba(0, 0, 0, 0.8));\n            border-bottom: 1px solid rgba(255, 215, 0, 0.1);\n            position: relative;\n            z-index: 10;\n        }\n\n        .chat-header-info-float {\n            display: flex;\n            align-items: center;\n            gap: 14px;\n        }\n\n        .chat-avatar-float {\n            width: 44px;\n            height: 44px;\n            border-radius: 50%;\n            border: 2px solid var(--gold-primary, #FFD700);\n            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.25);\n            object-fit: cover;\n        }\n\n        .chat-title-float {\n            font-family: 'Cinzel', serif;\n            font-size: 17px;\n            font-weight: 700;\n            color: var(--gold-primary, #FFD700);\n            letter-spacing: 0.5px;\n        }\n\n        .chat-status-float {\n            font-size: 12px;\n            color: var(--text-muted, rgba(255, 255, 255, 0.65));\n            display: flex;\n            align-items: center;\n            gap: 6px;\n            font-weight: 500;\n        }\n\n        .chat-status-float .status-dot {\n            position: static !important;\n            display: inline-block !important;\n            flex-shrink: 0;\n            width: 8px !important;\n            min-width: 8px;\n            height: 8px !important;\n            min-height: 8px;\n            background: #22c55e !important;\n            border-radius: 50% !important;\n            box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);\n            animation: statusPulse 2s ease-in-out infinite;\n            margin: 0 !important;\n            top: auto !important;\n            left: auto !important;\n            right: auto !important;\n            bottom: auto !important;\n        }\n\n        @keyframes statusPulse {\n            0%, 100% { box-shadow: 0 0 6px rgba(34, 197, 94, 0.5); }\n            50% { box-shadow: 0 0 10px rgba(34, 197, 94, 0.7); }\n        }\n\n        .chat-close-float {\n            background: rgba(255, 215, 0, 0.1);\n            border: 1px solid rgba(255, 215, 0, 0.2);\n            width: 38px;\n            height: 38px;\n            border-radius: 50%;\n            color: var(--gold-primary, #FFD700);\n            font-size: 18px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .chat-close-float:hover {\n            background: rgba(255, 215, 0, 0.2);\n            transform: rotate(90deg);\n        }\n\n        /* ===== MESSAGES AREA ===== */\n        .chat-messages-float {\n            flex: 1;\n            padding: 20px 16px;\n            padding-bottom: 10px;\n            overflow-y: auto;\n            display: flex;\n            flex-direction: column;\n            gap: 14px;\n            min-height: 0;\n            position: relative;\n            z-index: 1;\n        }\n\n        .chat-messages-float::-webkit-scrollbar {\n            width: 4px;\n        }\n\n        .chat-messages-float::-webkit-scrollbar-track {\n            background: transparent;\n        }\n\n        .chat-messages-float::-webkit-scrollbar-thumb {\n            background: rgba(255, 215, 0, 0.2);\n            border-radius: 4px;\n        }\n\n        /* ===== CHAT BUBBLES ===== */\n        .chat-msg {\n            max-width: 85%;\n            padding: 12px 16px;\n            border-radius: 18px;\n            font-size: 14px;\n            line-height: 1.6;\n            animation: msgSlideIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);\n            position: relative;\n        }\n\n        @keyframes msgSlideIn {\n            0% { opacity: 0; transform: translateY(15px) scale(0.97); }\n            100% { opacity: 1; transform: translateY(0) scale(1); }\n        }\n\n        .chat-msg.bot {\n            align-self: flex-start;\n            background: rgba(255, 215, 0, 0.08);\n            border: 1px solid rgba(255, 215, 0, 0.15);\n            color: var(--text-primary, #fff);\n            border-bottom-left-radius: 6px;\n            box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);\n        }\n\n        .chat-msg.bot::before {\n            content: 'âœ¨';\n            position: absolute;\n            left: -32px;\n            top: 6px;\n            font-size: 18px;\n            opacity: 0.8;\n        }\n\n        .chat-msg.user {\n            align-self: flex-end;\n            background: linear-gradient(135deg, var(--gold-primary, #FFD700), var(--gold-dark, #B8860B));\n            color: #000;\n            border-bottom-right-radius: 6px;\n            font-weight: 500;\n            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.25);\n        }\n\n        /* ===== QUICK ACTIONS ===== */\n        .chat-quick-float {\n            padding: 14px 16px;\n            display: flex;\n            gap: 8px;\n            flex-wrap: wrap;\n            justify-content: center;\n            border-top: 1px solid rgba(255, 215, 0, 0.08);\n            position: relative;\n            z-index: 1;\n        }\n\n        .quick-btn-float {\n            padding: 8px 16px;\n            background: rgba(255, 215, 0, 0.06);\n            border: 1px solid rgba(255, 215, 0, 0.15);\n            border-radius: 20px;\n            color: var(--gold-primary, #FFD700);\n            font-size: 12px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.25s ease;\n        }\n\n        .quick-btn-float:hover {\n            background: rgba(255, 215, 0, 0.12);\n            border-color: rgba(255, 215, 0, 0.3);\n            transform: translateY(-1px);\n        }\n\n        .quick-btn-float:active {\n            transform: translateY(0) scale(0.98);\n        }\n\n        /* ===== INPUT AREA ===== */\n        .chat-input-float {\n            padding: 14px 16px;\n            padding-bottom: max(18px, calc(env(safe-area-inset-bottom) + 6px));\n            display: flex;\n            gap: 12px;\n            align-items: center;\n            background: var(--bg-secondary, #0a0a0a);\n            border-top: 1px solid rgba(255, 215, 0, 0.1);\n            position: relative;\n            z-index: 1;\n        }\n\n        .chat-input-float input {\n            flex: 1;\n            padding: 12px 18px;\n            border-radius: 24px;\n            border: 1px solid rgba(255, 215, 0, 0.15);\n            background: rgba(255, 255, 255, 0.04);\n            color: var(--text-primary, #fff);\n            font-size: 14px;\n            outline: none;\n            transition: all 0.25s ease;\n        }\n\n        .chat-input-float input::placeholder {\n            color: var(--text-muted, rgba(255, 255, 255, 0.5));\n        }\n\n        .chat-input-float input:focus {\n            border-color: rgba(255, 215, 0, 0.4);\n            background: rgba(255, 255, 255, 0.06);\n            box-shadow: 0 0 12px rgba(255, 215, 0, 0.1);\n        }\n\n        .chat-input-float button {\n            width: 46px;\n            height: 46px;\n            border-radius: 50%;\n            background: linear-gradient(135deg, var(--gold-primary, #FFD700), var(--gold-dark, #B8860B));\n            border: none;\n            color: #000;\n            font-size: 18px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.25s ease;\n            box-shadow: 0 3px 12px rgba(255, 215, 0, 0.25);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n\n        .chat-input-float button:hover {\n            transform: scale(1.08);\n            box-shadow: 0 5px 18px rgba(255, 215, 0, 0.35);\n        }\n\n        .chat-input-float button:active {\n            transform: scale(0.96);\n        }\n\n        @media (max-width: 480px) {\n            .floating-chat-widget {\n                right: 16px;\n                bottom: 90px;\n            }\n\n            .chat-msg {\n                max-width: 88%;\n            }\n\n            .chat-msg.bot::before {\n                display: none;\n            }\n        }\n\n        /* ===== LIGHT MODE ===== */\n        body.light-mode .chat-window-float {\n            background: var(--bg-primary, #fff);\n        }\n\n        body.light-mode .chat-window-float::before {\n            background:\n                radial-gradient(ellipse at 20% 0%, rgba(212, 160, 23, 0.06) 0%, transparent 50%),\n                radial-gradient(ellipse at 80% 100%, rgba(212, 160, 23, 0.04) 0%, transparent 50%);\n        }\n\n        body.light-mode .chat-header-float {\n            background: var(--header-bg, rgba(255, 255, 255, 0.95));\n            box-shadow: var(--header-shadow, 0 2px 20px rgba(0, 0, 0, 0.1));\n            border-bottom-color: rgba(212, 160, 23, 0.15);\n        }\n\n        body.light-mode .chat-title-float {\n            color: var(--gold-primary, #b8860b);\n        }\n\n        body.light-mode .chat-avatar-float {\n            border-color: var(--gold-primary, #b8860b);\n        }\n\n        body.light-mode .chat-close-float {\n            background: rgba(212, 160, 23, 0.1);\n            border-color: rgba(212, 160, 23, 0.2);\n            color: var(--gold-primary, #b8860b);\n        }\n\n        body.light-mode .chat-msg.bot {\n            background: rgba(212, 160, 23, 0.08);\n            border-color: rgba(212, 160, 23, 0.15);\n            color: var(--text-primary, #333);\n        }\n\n        body.light-mode .chat-msg.user {\n            background: linear-gradient(135deg, var(--gold-bright, #d4a017), var(--gold-dark, #8B6914));\n        }\n\n        body.light-mode .chat-input-float {\n            background: var(--bg-secondary, #f8f9fa);\n            border-top-color: rgba(212, 160, 23, 0.1);\n        }\n\n        body.light-mode .chat-input-float input {\n            background: rgba(0, 0, 0, 0.03);\n            color: var(--text-primary, #333);\n            border-color: rgba(212, 160, 23, 0.15);\n        }\n\n        body.light-mode .chat-input-float input::placeholder {\n            color: var(--text-muted, rgba(0, 0, 0, 0.5));\n        }\n\n        body.light-mode .chat-input-float input:focus {\n            border-color: rgba(212, 160, 23, 0.35);\n            box-shadow: 0 0 10px rgba(212, 160, 23, 0.1);\n        }\n\n        body.light-mode .chat-input-float button {\n            background: linear-gradient(135deg, var(--gold-bright, #d4a017), var(--gold-dark, #8B6914));\n        }\n\n        body.light-mode .quick-btn-float {\n            background: rgba(212, 160, 23, 0.08);\n            color: var(--gold-primary, #b8860b);\n            border-color: rgba(212, 160, 23, 0.2);\n        }\n\n        body.light-mode .chat-quick-float {\n            border-top-color: rgba(212, 160, 23, 0.08);\n        }\n\n        body.light-mode .chat-messages-float::-webkit-scrollbar-thumb {\n            background: rgba(212, 160, 23, 0.25);\n        }\n\n        /* ===== TYPING INDICATOR ===== */\n        .typing-indicator {\n            display: flex;\n            align-items: center;\n            gap: 4px;\n            padding: 14px 18px;\n            background: rgba(255, 215, 0, 0.08);\n            border: 1px solid rgba(255, 215, 0, 0.15);\n            border-radius: 18px;\n            border-bottom-left-radius: 6px;\n            align-self: flex-start;\n            animation: msgSlideIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);\n        }\n\n        .typing-indicator span {\n            width: 8px;\n            height: 8px;\n            background: var(--gold-primary, #FFD700);\n            border-radius: 50%;\n            animation: typingBounce 1.4s ease-in-out infinite;\n        }\n\n        .typing-indicator span:nth-child(1) {\n            animation-delay: 0s;\n        }\n\n        .typing-indicator span:nth-child(2) {\n            animation-delay: 0.2s;\n        }\n\n        .typing-indicator span:nth-child(3) {\n            animation-delay: 0.4s;\n        }\n\n        @keyframes typingBounce {\n            0%, 60%, 100% {\n                transform: translateY(0);\n                opacity: 0.4;\n            }\n            30% {\n                transform: translateY(-8px);\n                opacity: 1;\n            }\n        }\n\n        body.light-mode .typing-indicator {\n            background: rgba(212, 160, 23, 0.08);\n            border-color: rgba(212, 160, 23, 0.15);\n        }\n\n        body.light-mode .typing-indicator span {\n            background: var(--gold-primary, #b8860b);\n        }\n    `;const styleEl=document.createElement("style");styleEl.textContent=chatCSS;document.head.appendChild(styleEl);document.body.insertAdjacentHTML("beforeend",chatHTML);const chatWidget=document.getElementById("floatingChatWidget");const chatFab=document.getElementById("chatFab");const chatWindow=document.getElementById("chatWindowFloat");const chatClose=document.getElementById("chatCloseFloat");const chatMessages=document.getElementById("chatMessagesFloat");const chatInput=document.getElementById("chatInputFloat");const chatSend=document.getElementById("chatSendFloat");const quickBtns=document.querySelectorAll(".quick-btn-float");let isOpen=false;const botResponses={greeting:"Hello! Welcome to Blancbeu Beauty Salon. ðŸ’„âœ¨ How can I help you today?",services:"We offer Hair Styling, Makeup, Facials, Manicures, Pedicures, Spa treatments and more! ðŸ’‡â€â™€ï¸ Browse our services above or ask about a specific treatment.",booking:"I'd love to help you book! ðŸ“… You can call us at +91 92299 15277 or message on WhatsApp. We're open 10AM-8PM Mon-Sat.",hours:"ðŸ• Our hours are:\nâ€¢ Mon-Sat: 10:00 AM - 8:00 PM\nâ€¢ Sunday: 11:00 AM - 7:00 PM\nWe recommend booking in advance!",location:"ðŸ“ Find us on Google Maps! We're conveniently located in Ranchi. Click the Contact tab below to get directions.",default:"Thanks for your message! ðŸ’Œ Our team will respond shortly. You can also call us at +91 92299 15277 for immediate assistance."};function addMessage(text,type){const msg=document.createElement("div");msg.className=`chat-msg ${type}`;msg.textContent=text;chatMessages.appendChild(msg);chatMessages.scrollTop=chatMessages.scrollHeight}function showTypingIndicator(){const typing=document.createElement("div");typing.className="typing-indicator";typing.id="typingIndicator";typing.innerHTML="<span></span><span></span><span></span>";chatMessages.appendChild(typing);chatMessages.scrollTop=chatMessages.scrollHeight}function hideTypingIndicator(){const typing=document.getElementById("typingIndicator");if(typing){typing.remove()}}function addBotMessage(text){showTypingIndicator();const delay=1500+Math.random()*500;setTimeout(()=>{hideTypingIndicator();addMessage(text,"bot")},delay)}function processMessage(text){const lowerText=text.toLowerCase();let response=botResponses.default;if(lowerText.match(/service|offer|treatment|hair|makeup|facial|nail|spa/)){response=botResponses.services}else if(lowerText.match(/book|appointment|reserve|schedule/)){response=botResponses.booking}else if(lowerText.match(/hour|open|close|time|when/)){response=botResponses.hours}else if(lowerText.match(/where|location|address|direction|map/)){response=botResponses.location}else if(lowerText.match(/hi|hello|hey|good/)){response=botResponses.greeting}addBotMessage(response)}chatFab.addEventListener("click",()=>{isOpen=!isOpen;chatWindow.classList.toggle("open",isOpen);const mainHeader=document.getElementById("mainHeader");const bottomNav=document.getElementById("bottomNav");const floatingWidget=document.getElementById("floatingChatWidget");if(isOpen){if(mainHeader)mainHeader.style.display="none";if(bottomNav)bottomNav.style.display="none";if(floatingWidget)floatingWidget.querySelector(".chat-fab").style.display="none";if(chatMessages.children.length===0){setTimeout(()=>addBotMessage(botResponses.greeting),300)}}else{if(mainHeader)mainHeader.style.display="";if(bottomNav)bottomNav.style.display="";if(floatingWidget)floatingWidget.querySelector(".chat-fab").style.display=""}});chatClose.addEventListener("click",()=>{isOpen=false;chatWindow.classList.remove("open");const mainHeader=document.getElementById("mainHeader");const bottomNav=document.getElementById("bottomNav");const floatingWidget=document.getElementById("floatingChatWidget");if(mainHeader)mainHeader.style.display="";if(bottomNav)bottomNav.style.display="";if(floatingWidget)floatingWidget.querySelector(".chat-fab").style.display=""});chatSend.addEventListener("click",()=>{const text=chatInput.value.trim();if(text){addMessage(text,"user");chatInput.value="";processMessage(text)}});chatInput.addEventListener("keypress",e=>{if(e.key==="Enter"){chatSend.click()}});quickBtns.forEach(btn=>{btn.addEventListener("click",()=>{const action=btn.dataset.action;addMessage(btn.textContent,"user");addBotMessage(botResponses[action]||botResponses.default)})});console.log("ðŸ’¬ Chat widget initialized")}function triggerConfetti(){const colors=["#FFD700","#FFB6C1","#FFFFFF","#F7E7CE","#B76E79"];const container=document.createElement("div");container.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:99999;overflow:hidden;";document.body.appendChild(container);for(let i=0;i<80;i++){const particle=document.createElement("div");const color=colors[Math.floor(Math.random()*colors.length)];const size=6+Math.random()*8;const left=Math.random()*100;const delay=Math.random()*.5;particle.style.cssText=`\n            position:absolute;\n            left:${left}%;\n            top:-20px;\n            width:${size}px;\n            height:${size}px;\n            background:${color};\n            border-radius:${Math.random()>.5?"50%":"2px"};\n            animation:confettiFall ${2+Math.random()}s ease-out ${delay}s forwards;\n        `;container.appendChild(particle)}setTimeout(()=>container.remove(),4e3)}const confettiStyle=document.createElement("style");confettiStyle.textContent=`\n    @keyframes confettiFall {\n        0% { transform: translateY(0) rotate(0deg); opacity: 1; }\n        100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }\n    }\n`;document.head.appendChild(confettiStyle);window.triggerConfetti=triggerConfetti;let servicesPageCurrentCategory="all";let servicesPageSearchQuery="";let servicesPageHasInteracted=false;function initServicesPage(){const searchInput=document.getElementById("servicesPageSearch");const clearSearchBtn=document.getElementById("clearServicesSearch");const categoryCardsContainer=document.getElementById("servicesCategoryCards");const categoryCards=document.querySelectorAll(".category-image-card");console.log(`[Services] Init called. Found ${categoryCards.length} category cards.`);renderServicesPage();const resetServicesView=()=>{servicesPageCurrentCategory="all";servicesPageHasInteracted=false;const subtitle=document.querySelector(".services-page-subtitle");if(subtitle&&subtitle.dataset.originalText){subtitle.textContent=subtitle.dataset.originalText;subtitle.classList.remove("has-back-btn")}categoryCardsContainer.classList.remove("category-active-mode");categoryCards.forEach(c=>c.classList.remove("active"));const allCard=document.querySelector('.category-image-card[data-category="all"]');if(allCard)allCard.classList.add("active");renderServicesPage();const grid=document.getElementById("servicesPageGrid");if(grid){grid.classList.add("animate-fade-in");setTimeout(()=>grid.classList.remove("animate-fade-in"),400)}};let touchStartX=0;let touchStartY=0;let touchEndX=0;let isScrolling=undefined;const servicesGridContainer=document.querySelector(".services-page-container")||document.body;const existingIndicators=document.querySelectorAll("#swipeBackIndicator");existingIndicators.forEach(el=>el.remove());let swipeIndicator=document.createElement("div");swipeIndicator.id="swipeBackIndicator";swipeIndicator.innerHTML=`\n        <div class="swipe-arrow-circle">\n            <svg viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>\n        </div>`;document.body.appendChild(swipeIndicator);servicesGridContainer.addEventListener("touchstart",e=>{touchStartX=e.changedTouches[0].clientX;touchStartY=e.changedTouches[0].clientY;isScrolling=undefined},{passive:true});servicesGridContainer.addEventListener("touchmove",e=>{const categoryContainer=document.getElementById("servicesCategoryCards");if(!categoryContainer||!categoryContainer.classList.contains("category-active-mode"))return;const currentX=e.changedTouches[0].clientX;const currentY=e.changedTouches[0].clientY;const diffX=currentX-touchStartX;const diffY=currentY-touchStartY;if(typeof isScrolling==="undefined"){isScrolling=Math.abs(diffY)>Math.abs(diffX)}if(isScrolling){return}if(diffX>15){if(e.cancelable){e.preventDefault()}swipeIndicator.classList.add("visible");const pullProgress=Math.min(diffX/120,1);const scale=1+pullProgress*.3;const moveX=Math.min(diffX,80);swipeIndicator.style.transform=`translateY(-50%) translateX(${moveX}px) scale(${scale})`;if(diffX>60){swipeIndicator.classList.add("active")}else{swipeIndicator.classList.remove("active")}}else{swipeIndicator.classList.remove("visible");swipeIndicator.classList.remove("active");swipeIndicator.style.transform=`translateY(-50%) translateX(0) scale(1)`}},{passive:false});servicesGridContainer.addEventListener("touchend",e=>{touchEndX=e.changedTouches[0].clientX;swipeIndicator.classList.remove("visible");swipeIndicator.classList.remove("active");swipeIndicator.style.transform=`translateY(-50%) translateX(0) scale(1)`;if(!isScrolling){handleSwipeBack()}},{passive:true});function handleSwipeBack(){const categoryContainer=document.getElementById("servicesCategoryCards");if(!categoryContainer||!categoryContainer.classList.contains("category-active-mode"))return;const swipeDistance=touchEndX-touchStartX;const threshold=60;if(swipeDistance>threshold){triggerBackAnimation()}}const triggerBackAnimation=()=>{const elementsToAnimate=[document.getElementById("servicesPageGrid"),document.getElementById("servicesCategoryCards"),document.querySelector(".services-count-bar"),document.querySelector(".services-page-subtitle")];elementsToAnimate.forEach(el=>{if(el){el.classList.remove("animate-slide-out-right");void el.offsetWidth;el.classList.add("animate-slide-out-right")}});setTimeout(()=>{elementsToAnimate.forEach(el=>{if(el)el.classList.remove("animate-slide-out-right")});resetServicesView()},250)};categoryCards.forEach(card=>{card.addEventListener("click",e=>{console.log(`[Services] Card clicked: ${card.dataset.category}`);const category=card.dataset.category;const subtitle=document.querySelector(".services-page-subtitle");if(!subtitle.dataset.originalText){subtitle.dataset.originalText=subtitle.textContent}const isModeActive=categoryCardsContainer.classList.contains("category-active-mode");const isAlreadyActive=card.classList.contains("active");if(isModeActive&&isAlreadyActive){triggerBackAnimation();return}servicesPageHasInteracted=true;servicesPageCurrentCategory=category;categoryCardsContainer.classList.add("category-active-mode");categoryCards.forEach(c=>c.classList.remove("active"));card.classList.add("active");const categoryName=card.querySelector("h3")?card.querySelector("h3").textContent:category;subtitle.innerHTML=`\n                <div class="services-back-btn">\n                    <svg viewBox="0 0 24 24">\n                        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />\n                    </svg>\n                </div>\n                <div class="services-category-title">${categoryName}</div>\n            `;subtitle.classList.add("has-back-btn");subtitle.querySelector(".services-back-btn").addEventListener("click",e=>{e.stopPropagation();triggerBackAnimation()});const performScroll=()=>{const searchBar=document.querySelector(".services-search-wrapper");const appContent=document.getElementById("appContent");const header=document.getElementById("mainHeader");if(searchBar&&appContent){if(header){header.classList.add("hidden");header.classList.add("force-hidden")}const offset=10;const rect=searchBar.getBoundingClientRect();const targetScroll=appContent.scrollTop+rect.top-offset;appContent.scrollTo({top:targetScroll,behavior:"smooth"})}};setTimeout(performScroll,10);setTimeout(performScroll,350);renderServicesPage()})});if(searchInput){searchInput.addEventListener("input",e=>{servicesPageSearchQuery=e.target.value.toLowerCase();clearSearchBtn.style.display=servicesPageSearchQuery?"flex":"none";renderServicesPage()})}if(clearSearchBtn){clearSearchBtn.addEventListener("click",()=>{searchInput.value="";servicesPageSearchQuery="";clearSearchBtn.style.display="none";renderServicesPage()})}console.log("ðŸ’Ž Services Page initialized (Interactive Cards)")}function renderServicesPage(){const grid=document.getElementById("servicesPageGrid");const countElement=document.getElementById("servicesPageCount");if(!grid)return;let allServices=[];servicesData.groups.forEach(group=>{group.services.forEach(service=>{allServices.push({...service,category:group.group,icon:group.icon})})});if(servicesPageCurrentCategory!=="all"){allServices=allServices.filter(s=>s.category===servicesPageCurrentCategory)}if(servicesPageSearchQuery){allServices=allServices.filter(s=>s.name.toLowerCase().includes(servicesPageSearchQuery)||s.category.toLowerCase().includes(servicesPageSearchQuery))}const categoryCards=document.querySelectorAll(".category-image-card");if(servicesPageCurrentCategory==="all"){if(servicesPageSearchQuery){const matchingCategories=new Set(allServices.map(s=>s.category));categoryCards.forEach(card=>{const cardCat=card.dataset.category;if(cardCat==="all"){card.style.display="none"}else if(matchingCategories.has(cardCat)){card.style.display=""}else{card.style.display="none"}})}else{categoryCards.forEach(card=>card.style.display="")}}else{categoryCards.forEach(card=>card.style.display="")}if(servicesPageCurrentCategory==="all"&&!servicesPageSearchQuery&&!servicesPageHasInteracted){grid.innerHTML="";if(countElement)countElement.textContent="";return}if(countElement){if(servicesPageSearchQuery){countElement.innerHTML=`Found <strong>${allServices.length}</strong> service${allServices.length!==1?"s":""} for "${servicesPageSearchQuery}"`}else if(servicesPageCurrentCategory!=="all"){const displayCatName=servicesPageCurrentCategory.charAt(0).toUpperCase()+servicesPageCurrentCategory.slice(1);countElement.innerHTML=`Showing <strong>${allServices.length}</strong> ${displayCatName} service${allServices.length!==1?"s":""}`}else{countElement.innerHTML=`Showing all <strong>${allServices.length}</strong> services`}}if(allServices.length===0){grid.innerHTML=`\n            <div class="services-empty-state" style="grid-column: 1 / -1;">\n                <div class="services-empty-icon">ðŸ”</div>\n                <h3 class="services-empty-title">No services found</h3>\n                <p class="services-empty-text">Try a different search term or category</p>\n            </div>\n        `;return}grid.innerHTML=allServices.map(service=>{const hasOffer=service.offerPrice!==null;const discount=hasOffer?Math.round((1-service.offerPrice/service.price)*100):0;const displayPrice=service.offerPrice||service.price;const duration=service.duration||"30-60 min";const bookingMessage=encodeURIComponent(`Hi! I'd like to book "${service.name}" from ${service.category}. Please let me know the available slots.`);const whatsappLink=`https://wa.me/919229915277?text=${bookingMessage}`;return`\n            <div class="service-page-card">\n                <div class="service-duration-badge">â±ï¸ ${duration}</div>\n                <div class="service-page-card-info">\n                    <div class="service-page-card-category">\n                        <span>${service.icon}</span>\n                        <span>${service.category}</span>\n                    </div>\n                    <div class="service-page-card-name">${service.name}</div>\n                    <div class="service-page-card-prices">\n                        ${hasOffer?`<span class="service-page-original-price">â‚¹${service.price}</span>`:""}\n                        <span class="service-page-offer-price">â‚¹${displayPrice}</span>\n                        ${hasOffer&&discount>0?`<span class="service-page-discount-badge">${discount}% OFF</span>`:""}\n                    </div>\n                </div>\n                <button class="service-page-book-btn service-btn" type="button">Book Now</button>\n            </div>\n        `}).join("")}function onServicesPageVisible(){const grid=document.getElementById("servicesPageGrid");if(grid&&!grid.dataset.initialized){initServicesPage();grid.dataset.initialized="true"}}window.onServicesPageVisible=onServicesPageVisible;document.addEventListener("DOMContentLoaded",()=>{const servicesPage=document.querySelector('[data-page="services"]');if(servicesPage&&servicesPage.classList.contains("active")){onServicesPageVisible()}const bottomNavItems=document.querySelectorAll(".bottom-nav .nav-item");bottomNavItems.forEach(item=>{item.addEventListener("click",()=>{if(item.dataset.page==="services"){setTimeout(onServicesPageVisible,100)}})});const headerNavLinks=document.querySelectorAll('.nav a[href="#services"]');headerNavLinks.forEach(link=>{link.addEventListener("click",()=>{setTimeout(onServicesPageVisible,100)})});window.addEventListener("hashchange",()=>{if(window.location.hash==="#services"){setTimeout(onServicesPageVisible,100)}})});window.filterByCategory=function(category){const card=document.querySelector(`.category-image-card[data-category="${category}"]`);if(card){card.click()}};function initModernBookingsTabs(){const tabs=document.querySelectorAll(".booking-pill-tab");const groups=document.querySelectorAll(".booking-group");tabs.forEach(tab=>{tab.addEventListener("click",()=>{const status=tab.dataset.status;tabs.forEach(t=>t.classList.remove("active"));tab.classList.add("active");groups.forEach(group=>{group.classList.add("hidden");group.style.display="none"});const targetGroup=document.getElementById(`${status}-bookings`);if(targetGroup){targetGroup.classList.remove("hidden");targetGroup.style.display="block";targetGroup.style.opacity="0";targetGroup.style.transform="translateY(10px)";targetGroup.style.transition="all 0.4s ease";requestAnimationFrame(()=>{targetGroup.style.opacity="1";targetGroup.style.transform="translateY(0)"})}else{}})})}document.addEventListener("DOMContentLoaded",()=>{initModernBookingsTabs()});class ImmersiveChatAssistant{constructor(){this.messagesContainer=document.getElementById("chatMessages");this.input=document.getElementById("chatInput");this.sendBtn=document.getElementById("sendMessageBtn");this.voiceBtn=document.getElementById("voiceInputBtn");this.isListening=false;this.knowledgeBase=[{keywords:/book|appointment|schedule|reserve/i,response:"I can fast-track your booking! Which service are you interested in?",actions:[{label:"Book Haircut âœ‚ï¸",action:"booking"},{label:"Book Facial ðŸ§–â€â™€ï¸",action:"booking"},{label:"General Booking ðŸ“…",action:"booking"}]},{keywords:/price|cost|how much|rate/i,response:"Our pricing is very competitive! Haircuts start at â‚¹200 and Facials from â‚¹500. Would you like to see the full menu?",actions:[{label:"View Full Price List ðŸ“‹",action:"services"}]},{keywords:/offer|discount|deal|promo/i,response:"We have some amazing offers running currently! You can get up to 20% off on combos.",actions:[{label:"View Offers ðŸŽ‰",action:"home"}]},{keywords:/location|address|where|map/i,response:"We are located in Ranchi at the heart of the city. You can view our exact location on the map.",actions:[{label:"Open in Maps ðŸ“",action:"maps"}]},{keywords:/cancellation|cancel|refund/i,response:"You can cancel or reschedule appointments from the 'My Bookings' section anytime before 2 hours of the slot.",actions:[{label:"Manage Bookings ðŸŽ«",action:"bookings"}]},{keywords:/hair|cut|style/i,response:"Our hair experts are the best in town! From styling to treatments, we do it all.",actions:[{label:"Explore Hair Services ðŸ’‡",action:"services"}]},{keywords:/facial|skin|glow/i,response:"Get that radiant glow with our premium facials using top-tier products.",actions:[{label:"Explore Facials âœ¨",action:"services"}]}];this.init()}init(){if(!this.messagesContainer)return;this.sendBtn.addEventListener("click",()=>this.handleSend());this.input.addEventListener("keypress",e=>{if(e.key==="Enter")this.handleSend()});window.handleQuickAction=action=>this.processAction(action);if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new SpeechRecognition;this.recognition.continuous=false;this.recognition.lang="en-US";this.recognition.onstart=()=>{this.isListening=true;this.voiceBtn.classList.add("listening");this.input.placeholder="Listening..."};this.recognition.onend=()=>{this.isListening=false;this.voiceBtn.classList.remove("listening");this.input.placeholder="Type or speak..."};this.recognition.onresult=event=>{const transcript=event.results[0][0].transcript;this.input.value=transcript;setTimeout(()=>this.handleSend(),500)};this.voiceBtn.addEventListener("click",()=>{if(this.isListening)this.recognition.stop();else this.recognition.start()})}else{this.voiceBtn.style.display="none"}console.log("Immersive Chat Assistant Initialized âœ¨")}handleSend(){const text=this.input.value.trim();if(!text)return;this.addMessage(text,"user");this.input.value="";this.showTypingIndicator();setTimeout(()=>{this.removeTypingIndicator();this.generateResponse(text)},800+Math.random()*500)}addMessage(text,sender,actions=[]){const msgDiv=document.createElement("div");msgDiv.className=`message ${sender}-message`;let actionsHtml="";if(actions&&actions.length>0){actionsHtml=`<div class="chat-suggestion-chips">\n                ${actions.map(act=>`<button class="chip" onclick="handleQuickAction('${act.action}')">${act.label}</button>`).join("")}\n            </div>`}msgDiv.innerHTML=`\n            <div class="message-content">\n                ${text}\n            </div>\n            ${actionsHtml}\n        `;this.messagesContainer.appendChild(msgDiv);this.scrollToBottom()}scrollToBottom(){this.messagesContainer.scrollTop=this.messagesContainer.scrollHeight}showTypingIndicator(){const typingDiv=document.createElement("div");typingDiv.id="typingIndicator";typingDiv.className="message bot-message";typingDiv.innerHTML=`<div class="message-content">Thinking... ðŸ¤”</div>`;this.messagesContainer.appendChild(typingDiv);this.scrollToBottom()}removeTypingIndicator(){const typingDiv=document.getElementById("typingIndicator");if(typingDiv)typingDiv.remove()}generateResponse(userInput){let match=null;for(const item of this.knowledgeBase){if(item.keywords.test(userInput)){match=item;break}}if(match){this.addMessage(match.response,"bot",match.actions)}else{this.addMessage("I can definitely help with that! Could you select one of the options below or verify what you're looking for?","bot",[{label:"Book Appointment",action:"booking"},{label:"See Prices",action:"services"},{label:"Talk to Human",action:"whatsapp"}])}}processAction(actionType){console.log("Processing Action:",actionType);const act=actionType.toLowerCase();if(act.includes("book")||act==="booking"){document.querySelector('.bottom-nav .nav-item[data-page="bookings"]').click()}else if(act.includes("service")||act==="services"){document.querySelector('.bottom-nav .nav-item[data-page="services"]').click()}else if(act.includes("home")||act==="offers"){document.querySelector('.bottom-nav .nav-item[data-page="home"]').click()}else if(act==="maps"||act.includes("location")){window.open("https://maps.google.com/?q=BlancBeu+Family+Beauty+Salon","_blank")}else if(act==="whatsapp"){window.open("https://wa.me/919229915277","_blank")}else{if(act.includes("hair")||act.includes("cut"))document.querySelector('.bottom-nav .nav-item[data-page="services"]').click()}}}document.addEventListener("DOMContentLoaded",()=>{const obs=new MutationObserver(()=>{const chatSection=document.getElementById("chat");if(chatSection.classList.contains("active")){const floatingWidget=document.querySelector(".chat-widget");if(floatingWidget)floatingWidget.style.display="none"}else{const floatingWidget=document.querySelector(".chat-widget");if(floatingWidget)floatingWidget.style.display="block"}});const pages=document.querySelectorAll(".app-page");pages.forEach(page=>{obs.observe(page,{attributes:true,attributeFilter:["class"]})});window.immersiveChat=new ImmersiveChatAssistant});class GalleryController{constructor(){this.galleryGrid=document.querySelector("#gallery .gallery-grid");this.galleryItems=document.querySelectorAll(".gallery-item");this.scrollLeftBtn=document.querySelector(".gallery-scroll-left");this.scrollRightBtn=document.querySelector(".gallery-scroll-right");this.lightbox=null;this.track=null;this.init()}init(){this.initGalleryScroll();if(this.galleryItems.length>0){this.initLightbox()}}initGalleryScroll(){if(!this.galleryGrid||!this.scrollLeftBtn||!this.scrollRightBtn)return;const scrollAmount=300;this.scrollLeftBtn.addEventListener("click",e=>{e.preventDefault();this.galleryGrid.scrollBy({left:-scrollAmount,behavior:"smooth"})});this.scrollRightBtn.addEventListener("click",e=>{e.preventDefault();this.galleryGrid.scrollBy({left:scrollAmount,behavior:"smooth"})})}initLightbox(){this.createLightboxDOM();this.attachLightboxListeners()}createLightboxDOM(){const old=document.getElementById("lightboxModal");if(old)old.remove();const modal=document.createElement("div");modal.className="lightbox-modal";modal.id="lightboxModal";let slidesHTML="";this.galleryItems.forEach((item,index)=>{const img=item.querySelector("img");const title=item.querySelector("h3")?.textContent||"";slidesHTML+=`\n                <div class="lightbox-slide" data-index="${index}">\n                    <img data-src="${img.src}" class="lightbox-image" alt="${img.alt}" draggable="false" loading="lazy">\n                    <div class="lightbox-caption-container">\n                        <span class="lightbox-caption">${title}</span>\n                    </div>\n                </div>\n            `});modal.innerHTML=`\n            <div class="lightbox-track-container">\n                ${slidesHTML}\n            </div>\n\n            <div class="lightbox-controls">\n                <button class="lightbox-btn lightbox-close" aria-label="Close">âœ•</button>\n                <div class="lightbox-gradient-left"></div>\n                <div class="lightbox-gradient-right"></div>\n            </div>\n        `;document.body.appendChild(modal);this.lightbox=modal;this.track=modal.querySelector(".lightbox-track-container")}attachLightboxListeners(){this.galleryItems.forEach((item,index)=>{item.addEventListener("click",e=>{e.stopImmediatePropagation();this.open(index)})});const closeBtn=this.lightbox.querySelector(".lightbox-close");closeBtn.addEventListener("click",()=>this.close());this.lightbox.addEventListener("click",e=>{if(e.target===this.lightbox||e.target.classList.contains("lightbox-track-container")){this.close()}});const observerOptions={root:this.track,threshold:.6};const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{const slide=entry.target;const img=slide.querySelector("img");if(entry.isIntersecting){if(img.dataset.src){img.src=img.dataset.src;img.removeAttribute("data-src");img.onload=()=>img.classList.add("loaded")}else if(!img.classList.contains("loaded")){img.classList.add("loaded")}slide.classList.add("is-selected")}else{slide.classList.remove("is-selected");if(img&&img.style.transform&&img.style.transform!=="scale(1)"){img.style.transform="scale(1)"}}})},observerOptions);this.track.querySelectorAll(".lightbox-slide").forEach(slide=>{observer.observe(slide)});let lastTap=0;let initialPinchDistance=0;let currentScale=1;let isPinching=false;let startX=0,startY=0;let imageStartX=0,imageStartY=0;this.track.addEventListener("touchstart",e=>{if(e.touches.length===2){isPinching=true;initialPinchDistance=this.getDistance(e.touches);e.preventDefault()}else if(e.touches.length===1){const now=(new Date).getTime();const timeDiff=now-lastTap;if(timeDiff<300&&timeDiff>0){this.handleDoubleTap(e)}lastTap=now;if(currentScale>1){startX=e.touches[0].clientX;startY=e.touches[0].clientY;const target=e.target.closest(".lightbox-slide")?.querySelector("img")}}},{passive:false});this.track.addEventListener("touchmove",e=>{if(isPinching&&e.touches.length===2){e.preventDefault();const dist=this.getDistance(e.touches);const scaleChange=dist/initialPinchDistance;let newScale=currentScale*scaleChange;newScale=Math.min(Math.max(1,newScale),4);const target=e.target.closest(".lightbox-slide")?.querySelector("img");if(target){target.style.transform=`scale(${newScale})`}}},{passive:false});this.track.addEventListener("touchend",e=>{if(isPinching&&e.touches.length<2){isPinching=false;const target=e.target.closest(".lightbox-slide")?.querySelector("img");if(target){const transform=target.style.transform;const match=transform.match(/scale\((.*?)\)/);if(match){currentScale=parseFloat(match[1]);if(currentScale<1){currentScale=1;target.style.transform="scale(1)"}}}}})}getDistance(touches){return Math.hypot(touches[0].clientX-touches[1].clientX,touches[0].clientY-touches[1].clientY)}handleDoubleTap(e){const target=e.target.closest(".lightbox-slide")?.querySelector("img");if(!target)return;if(target.style.transform&&target.style.transform!=="scale(1)"&&target.style.transform!==""){target.style.transform="scale(1)"}else{target.style.transform="scale(1.5)"}}open(index){this.lightbox.classList.add("active");document.body.style.overflow="hidden";const targetSlide=this.track.children[index];if(targetSlide){targetSlide.scrollIntoView({behavior:"auto",block:"center",inline:"center"})}}close(){this.lightbox.classList.remove("active");document.body.style.overflow=""}}function initGalleryPeek(){}window.addEventListener("load",()=>{const loader=document.getElementById("app-loader");if(loader){setTimeout(()=>{loader.classList.add("fade-out");setTimeout(()=>{loader.remove()},800)},1200)}});window.moveCarousel=moveCarousel;window.goToSlide=goToSlide;window.showTC=showTC;window.closeTC=closeTC;window.openBlancbeuMaps=openBlancbeuMaps;window.openWhatsAppChat=openWhatsAppChat;window.slideTestimonial=slideTestimonial;window.slideStaff=slideStaff;window.slideServiceCarousel=slideServiceCarousel;window.deferredPrompt=null;document.addEventListener("DOMContentLoaded",()=>{if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(registration=>{console.log("âœ… ServiceWorker registration successful with scope: ",registration.scope)}).catch(err=>{console.log("âŒ ServiceWorker registration failed: ",err)})})}const installBtn=document.getElementById("installBtn");window.addEventListener("beforeinstallprompt",e=>{e.preventDefault();window.deferredPrompt=e;console.log("ðŸ“² PWA Install Prompt captured");setTimeout(()=>{if(installBtn){installBtn.style.display="flex";installBtn.style.opacity="0";installBtn.style.transition="opacity 0.5s ease";requestAnimationFrame(()=>{installBtn.style.opacity="1"});console.log("ðŸ•’ 30s elapsed: Showing Install Button")}},3e4)});if(installBtn){installBtn.addEventListener("click",async()=>{const promptEvent=window.deferredPrompt;if(!promptEvent){return}promptEvent.prompt();const result=await promptEvent.userChoice;console.log("ðŸ‘ User choice:",result.outcome);window.deferredPrompt=null;installBtn.style.display="none"})}window.addEventListener("appinstalled",evt=>{console.log("ðŸŽ‰ App installed successfully");if(installBtn)installBtn.style.display="none";if(typeof triggerConfetti==="function"){triggerConfetti()}});if(typeof initFloatingChatWidget==="function"){initFloatingChatWidget()}});